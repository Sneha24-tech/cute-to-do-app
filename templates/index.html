<!DOCTYPE html>
<html>
<head>
    <title>My Cute To-Do List ğŸ“â¤ï¸</title>
    <style>
        .completed-task {
            text-decoration: line-through;
            opacity: 0.5;
            transition: all 0.3s ease;
        }
    </style>

    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <img src="{{ url_for('static', filename='images/panda-left.jpg') }}" class="panda-left">
    <img src="{{ url_for('static', filename='images/panda-right.jpg') }}" class="panda-right">

    <h1>Hello!ğŸ‚<br>
    Get your to-do list done today!ğŸ’•ğŸ¯</h1>
     <!-- ğŸŒ— Dark Mode Toggle Switch -->
    <label class="switch">
     <input type="checkbox" id="modeToggle">
     <span class="slider round"></span>
    </label>
    <p id="modeLabel" style="font-weight:bold; font-size:14px;">ğŸŒ Light Mode</p>
    <p style="color: #6a1b9a; font-weight: bold; font-size: 18px;">ğŸ“… {{ today }}</p>
    <p style="color: #ff69b4; font-style: italic; font-size: 16px;">ğŸŒŸ {{ quote }}</p>


    <form action="/add" method="POST">
        
        <input type="text" name="task" placeholder="ğŸŒ¸ Add a new task..." required>
        <input type="date" name="task_date" required>
        <select name="task_priority" required style="padding: 8px; border-radius: 8px; margin-left: 10px;">
          <option value="High">ğŸ”´ High</option>
          <option value="Medium">ğŸŸ¡ Medium</option>
          <option value="Low">ğŸŸ¢ Low</option>
        </select>

        <button type="submit">â• Add Task</button>
    </form>

    <h2>ğŸŒ· Your Tasks:</h2>
    <ul>
        {% for task in tasks %}
        <li>
            <form action="/toggle/{{ loop.index0 }}" method="get" style="display: inline;">
               <input type="checkbox" onChange="this.form.submit()" {% if task.completed %}checked{% endif %}>
            </form>

            <span class="{% if task.completed %}completed-task{% endif %}">
            ğŸŒˆ{{ task.text }} - <span style="color:#6a1b9a;">ğŸ“… {{ task.date | datetimeformat }}</span>
            <span style="margin-left: 10px; font-weight: bold;">
             {% if task.priority == 'High' %}
               ğŸ”´ {{ task.priority }}
             {% elif task.priority == 'Medium' %}
               ğŸŸ¡ {{ task.priority }}
             {% else %}
               ğŸŸ¢ {{ task.priority }}
             {% endif %}
            </span>
            <form action="/delete/{{ loop.index0 }}" method="POST" style="display:inline;">
                <button type="submit">ğŸ—‘ï¸</button>
            </form>
        </li>
        {% endfor %}
    </ul>
<script>
  const toggle = document.getElementById("modeToggle");
  const modeLabel = document.getElementById("modeLabel");

  // Check saved mode on page load
  if (localStorage.getItem("mode") === "dark") {
    document.body.classList.add("dark-mode");
    toggle.checked = true;
    modeLabel.textContent = "ğŸŒ™ Dark Mode";
  }

  toggle.addEventListener("change", function () {
    if (this.checked) {
      document.body.classList.add("dark-mode");
      localStorage.setItem("mode", "dark");
      modeLabel.textContent = "ğŸŒ™ Dark Mode";
    } else {
      document.body.classList.remove("dark-mode");
      localStorage.setItem("mode", "light");
      modeLabel.textContent = "ğŸŒ Light Mode";
    }
  });
</script>
</body>
</html>
